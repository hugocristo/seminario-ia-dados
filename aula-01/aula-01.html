<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Semin√°rio de Metodologia de Pesquisa X (PPGP-0114) - 2025/2: Aula 01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="aula-01_files/libs/clipboard/clipboard.min.js"></script>
<script src="aula-01_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="aula-01_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="aula-01_files/libs/quarto-html/popper.min.js"></script>
<script src="aula-01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="aula-01_files/libs/quarto-html/anchor.min.js"></script>
<link href="aula-01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="aula-01_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="aula-01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="aula-01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="aula-01_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="aulas.css">
</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sum√°rio</h2>
   
  <ul>
  <li><a href="#instala√ß√£o-do-ambiente-de-desenvolvimento" id="toc-instala√ß√£o-do-ambiente-de-desenvolvimento" class="nav-link active" data-scroll-target="#instala√ß√£o-do-ambiente-de-desenvolvimento">1. Instala√ß√£o do ambiente de desenvolvimento</a>
  <ul>
  <li><a href="#linguagem-r" id="toc-linguagem-r" class="nav-link" data-scroll-target="#linguagem-r">1.1 Linguagem R</a></li>
  <li><a href="#positron" id="toc-positron" class="nav-link" data-scroll-target="#positron">1.2 Positron</a></li>
  <li><a href="#github" id="toc-github" class="nav-link" data-scroll-target="#github">1.3 GitHub</a></li>
  <li><a href="#ollama" id="toc-ollama" class="nav-link" data-scroll-target="#ollama">1.4 Ollama</a></li>
  <li><a href="#executando-o-ambiente" id="toc-executando-o-ambiente" class="nav-link" data-scroll-target="#executando-o-ambiente">1.5 Executando o ambiente</a></li>
  </ul></li>
  <li><a href="#princ√≠pios-b√°sicos-de-programa√ß√£o-em-r-com-notebooks" id="toc-princ√≠pios-b√°sicos-de-programa√ß√£o-em-r-com-notebooks" class="nav-link" data-scroll-target="#princ√≠pios-b√°sicos-de-programa√ß√£o-em-r-com-notebooks">2. Princ√≠pios b√°sicos de programa√ß√£o em R com <em>notebooks</em></a>
  <ul>
  <li><a href="#tipos-de-dados" id="toc-tipos-de-dados" class="nav-link" data-scroll-target="#tipos-de-dados">2.1 Tipos de dados</a>
  <ul class="collapse">
  <li><a href="#operadores" id="toc-operadores" class="nav-link" data-scroll-target="#operadores">Operadores</a></li>
  <li><a href="#tudo-s√£o-vetores" id="toc-tudo-s√£o-vetores" class="nav-link" data-scroll-target="#tudo-s√£o-vetores">Tudo s√£o vetores</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data Frames</a></li>
  </ul></li>
  <li><a href="#fun√ß√µes" id="toc-fun√ß√µes" class="nav-link" data-scroll-target="#fun√ß√µes">2.2 Fun√ß√µes</a></li>
  <li><a href="#estruturas-de-controle" id="toc-estruturas-de-controle" class="nav-link" data-scroll-target="#estruturas-de-controle">2.3 Estruturas de controle</a></li>
  </ul></li>
  <li><a href="#importa√ß√£o-e-processamento-de-dados" id="toc-importa√ß√£o-e-processamento-de-dados" class="nav-link" data-scroll-target="#importa√ß√£o-e-processamento-de-dados">3. Importa√ß√£o e processamento de dados</a>
  <ul>
  <li><a href="#arquivos-texto-txt-csv-etc." id="toc-arquivos-texto-txt-csv-etc." class="nav-link" data-scroll-target="#arquivos-texto-txt-csv-etc.">3.1 Arquivos texto (TXT, CSV etc.)</a></li>
  <li><a href="#planilhas-microsoft-excel-xlsx" id="toc-planilhas-microsoft-excel-xlsx" class="nav-link" data-scroll-target="#planilhas-microsoft-excel-xlsx">3.2 Planilhas Microsoft Excel (XLSX)</a></li>
  </ul></li>
  <li><a href="#atividade" id="toc-atividade" class="nav-link" data-scroll-target="#atividade">4. Atividade</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Semin√°rio de Metodologia de Pesquisa X (PPGP-0114) - 2025/2: Aula 01</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<ul>
<li>Tema: An√°lise Computacional de Dados Textuais</li>
<li>Respons√°vel: Prof.&nbsp;Dr.&nbsp;Hugo Cristo Sant‚ÄôAnna - <a href="mailto:hugo.santanna@ufes.br">hugo.santanna@ufes.br</a></li>
</ul>
<section id="instala√ß√£o-do-ambiente-de-desenvolvimento" class="level2">
<h2 class="anchored" data-anchor-id="instala√ß√£o-do-ambiente-de-desenvolvimento">1. Instala√ß√£o do ambiente de desenvolvimento</h2>
<section id="linguagem-r" class="level3">
<h3 class="anchored" data-anchor-id="linguagem-r">1.1 Linguagem R</h3>
<p>As an√°lises ser√£o escritas na <a href="https://cran.r-project.org/">linguagem R</a>, espec√≠fica para a realiza√ß√£o de computa√ß√£o estat√≠stica. R foi criada em 1993 como alternativa de c√≥digo aberto √† linguagem S, desenvolvida inicialmente em 1975 pela equipe Bell Labs. A vers√£o mais recente √© <strong>4.5.2</strong> (21/10/2026), mas todos os scripts da disciplina funcionar√£o nas vers√µes <strong>4.5.x</strong>.</p>
<p>Fa√ßa o download do <a href="https://cran-r.c3sl.ufpr.br/">instalador R</a> no computador que ser√° utilizado para as atividades da disciplina, de acordo com o seu sistema operacional (Windows, macOS ou Linux). Siga os passos da instala√ß√£o, aceitando as sugest√µes padr√£o. Ao t√©rmino do processo, procure pelo √≠cone do programa e o execute. Se estiver tudo correto, a tela a seguir ser√° exibida:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/interface-R-451.png" class="img-fluid figure-img"></p>
<figcaption>Interface Windows - R 4.5.1.</figcaption>
</figure>
</div>
<p>Na imagem abaixo, observa-se que ambiente gr√°fico do R √© dividido em duas principais √°reas: <em>console</em> (√† esquerda da imagem) e <em>editor R</em> (√† direita). O console serve para receber instru√ß√µes da linguagem em <em>modo interativo</em>, isto √©, linha ap√≥s linha. J√° o editor de c√≥digo permite a escrita de scripts mais longos, que podem ser executados por trechos ou integralmente.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/interface-R-451-editor.png" class="img-fluid figure-img"></p>
<figcaption>Interface Windows - R 4.5.1 (console e editor).</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p><strong>Dica:</strong> o ambiente R <em>n√£o</em> √© iniciado automaticamente com o Editor R vis√≠vel. Para criar um novo script, selecione a op√ß√£o <code>Arquivo &gt; Novo Script</code> (CTRL+N).</p>
</blockquote>
<p>Embora seja poss√≠vel utilizar o ambiente gr√°fico que acompanha a distribui√ß√£o R, h√° outros editores mais poderosos e amig√°veis, que incluem recursos tais como coloriza√ß√£o diferencial dos elementos da linguagem (fun√ß√µes, vari√°veis, operadores etc.), exibi√ß√£o de n√∫meros de linha, autocompleta√ß√£o de c√≥digo e visualiza√ß√£o de gr√°ficos e bases de dados de modo integrado.</p>
</section>
<section id="positron" class="level3">
<h3 class="anchored" data-anchor-id="positron">1.2 Positron</h3>
<p>H√° dois principais editores alternativos para a linguagem R: <a href="https://posit.co/products/open-source/rstudio/?sid=1">RStudio</a> e <a href="https://positron.posit.co/download.html">Positron</a>, ambos gratuitos e desenvolvidos pela empresa <a href="https://posit.co/">Posit</a>. Nesta disciplina, utilizaremos Posit, mais recente, mais leve e com suporte a <em>notebooks</em>.</p>
<p>Fa√ßa o download do instalador de <a href="https://positron.posit.co/download.html">Positron</a> e siga os passos sugeridos. Se a instala√ß√£o for bem-sucedida, voc√™ poder√° executar o programa e visualizar√° a interface a seguir:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/areas-positron.png" class="img-fluid figure-img"></p>
<figcaption>Interface do editor Positron com a indica√ß√£o das √°reas: (1) explorador de arquivos, (2) editor de c√≥digo, (3) console, (4) vari√°veis da sess√£o e (5) sa√≠da gr√°fica.</figcaption>
</figure>
</div>
<p>As √°reas indicadas na imagem s√£o as mais importantes do editor:</p>
<ol type="1">
<li><strong>Explorador de arquivos</strong>: arquivos do projeto atual, sejam scripts da linguagem R (.R), <em>notebooks</em> (.ipynb), imagens (.PNG, .JPG, .PDF) ou dados (.XLSX, .CSV, .TXT).</li>
<li><strong>Editor de c√≥digo</strong>: √°rea em que escreveremos <em>scripts</em> na linguagem R e coment√°rios Markdown.</li>
<li><strong>Console</strong>: √°rea para monitorar o funcionamento do motor da linguagem R e executar linhas de c√≥digo de modo interativo.</li>
<li><strong>Vari√°veis da sess√£o</strong>: listagem dos vetores, <em>dataframes</em> e outras estruturas de dados manipulados pelo <em>notebook</em> atual.</li>
<li><strong>Sa√≠da gr√°fica</strong>: visualiza√ß√£o de gr√°ficos gerados pelo <em>notebook</em>.</li>
</ol>
<blockquote class="blockquote">
<p><strong>Dica</strong>: <em>sempre</em> trabalharemos em <em>pastas</em>, n√£o em arquivos isolados. O bot√£o <code>Open Folder</code> na √°rea (1) da imagem permite a sele√ß√£o de uma pasta de trabalho, assim como a op√ß√£o <code>File &gt; Open Folder</code> (CTRL+K seguido de CTRL+O).</p>
</blockquote>
</section>
<section id="github" class="level3">
<h3 class="anchored" data-anchor-id="github">1.3 GitHub</h3>
<p>GitHub √© uma plataforma propriet√°ria (leia-se <em>paga</em>, por√©m com planos gratuitos) da Microsoft destinada √† cria√ß√£o, armazenamento, gest√£o e compartilhamento de reposit√≥rios de c√≥digo. Originalmente pensada para desenvolvedores da √°rea da Computa√ß√£o, foi adotada por pesquisadores das vertentes computacionais das ci√™ncias humanas, sociais e naturais com o intuito de apoiar pr√°ticas de <a href="https://www.unesco.org/en/open-science">ci√™ncia aberta</a> e <a href="https://www.nature.com/articles/s41562-016-0021">reprodutibilidade</a>.</p>
<p>Utilizaremos GitHub em duas principais frentes:</p>
<ol type="1">
<li>Clonagem dos <em>notebooks</em> de Positron referentes √†s aulas e publica√ß√£o dos trabalhos individuais;</li>
<li>Recupera√ß√£o de bases de dados textuais que ser√£o utilizadas nas demonstra√ß√µes.</li>
</ol>
<p>Para computadores pessoais executando Apple macOS e Microsoft Windows, recomenda-se a instala√ß√£o de <a href="https://github.com/apps/desktop?locale=pt-BR">GitHub Desktop</a>, a vers√£o da plataforma com interface gr√°fica com o usu√°rio. Sua utiliza√ß√£o √© mais simples e visual, dispensando a memoriza√ß√£o dos comandos necess√°rios para a clonagem, edi√ß√£o ou publica√ß√£o de reposit√≥rios.</p>
<p>Concretamente, GitHub permite que um projeto seja desenvolvido por mais de uma pessoa sem que haja conflitos nas altera√ß√µes dos trechos de c√≥digo. √â sempre poss√≠vel visualizar se modifica√ß√µes feitas por pessoas diferentes causar√£o problemas, evitando que programas que funcionam normalmente apresentem bugs ap√≥s atualiza√ß√µes.</p>
<p>Al√©m disso, GitHub permite que o mesmo usu√°rio tenha c√≥pias atualizadas de seu c√≥digo em diferentes m√°quinas, sem precisar se preocupar em rastrear quais arquivos (ou partes deles) foram modificados. Do ponto de vista da reprodutibilidade de an√°lises computacionais, GitHub oferece um ‚Äúpacote‚Äù para o cientista distribuir suas pesquisas que re√∫ne <em>scripts</em>, bases de dados e sa√≠das (tabelas, gr√°ficos etc.).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/areas-githubdesktop.png" class="img-fluid figure-img"></p>
<figcaption>Interface do GitHub Desktop (Windows).</figcaption>
</figure>
</div>
<p>As √°reas indicadas na imagem s√£o as mais importantes da plataforma:</p>
<ol type="1">
<li><strong>Reposit√≥rio</strong>: sele√ß√£o do reposit√≥rio a recuperar ou publicar na conta do GitHub. A aba lista todos os reposit√≥rios vinculados √† conta, sejam eles criados pelo usu√°rio atual ou clonados de outros usu√°rios.</li>
<li><strong>Ramo</strong>: vers√µes dispon√≠veis do reposit√≥rio (quando houver).</li>
<li><strong>Recupera√ß√£o</strong>: bot√£o para recuperar a √∫ltima vers√£o do reposit√≥rio hospedado na nuvem do GitHub.</li>
<li><strong>Arquivos modificados</strong>: lista dos arquivos que sofreram altera√ß√µes na m√°quina local, quando comparados aos arquivos dispon√≠veis na nuvem.<br>
</li>
<li><strong>Resumo e coment√°rios</strong>: identifica√ß√£o do conjunto de modifica√ß√µes realizadas, para permitir que outros desenvolvedores saibam o que foi alterado e decidam se devem ou n√£o recuperar o reposit√≥rio.</li>
<li><strong>Visualiza√ß√£o do versionamento</strong>: indica√ß√£o de trechos dos c√≥digos em que haja diferen√ßa entre a vers√£o que est√° na m√°quina local e aquela que est√° na nuvem de GitHub.</li>
</ol>
<p>Para importar um reposit√≥rio para GitHub Desktop, √© necess√°rio localizar o respectivo endere√ßo na Web, seja por indica√ß√£o, seja acessando a p√°gina no site do GitHub. Por exemplo:</p>
<blockquote class="blockquote">
<p><a href="https://github.com/hugocristo/seminario-ia-dados">https://github.com/hugocristo/seminario-ia-dados</a></p>
</blockquote>
<p>Observe que a identifica√ß√£o de todos os reposit√≥rios segue a estrutura:</p>
<blockquote class="blockquote">
<p><strong>https://github.com/</strong> + <strong>nome_do_usu√°rio_GitHub</strong> + <strong>/</strong> + <strong>nome_do_reposit√≥rio</strong></p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/areas-githubweb.png" class="img-fluid figure-img"></p>
<figcaption>Vis√£o Web do reposit√≥rio GitHub do semin√°rio</figcaption>
</figure>
</div>
<p>Uma vez identificado o endere√ßo do reposit√≥rio (√°rea 1 da imagem), procure pelo bot√£o <code>&lt;&gt; Code</code> indicado na √°rea (2) da p√°gina Web. H√° duas op√ß√µes para recuperar o reposit√≥rio (3):</p>
<ol type="1">
<li><strong>Open with GitHub Desktop</strong>: se a aplica√ß√£o estiver instalada, ser√° aberta automaticamente ap√≥s o clique e o reposit√≥rio poder√° ser clonado.</li>
<li><strong>Download ZIP</strong>: a vers√£o comprimida (‚Äúzipada‚Äù) do reposit√≥rio ser√° enviada como <em>download</em> para o navegador.</li>
</ol>
<blockquote class="blockquote">
<p><strong>Dica</strong>: Quando um reposit√≥rio de terceiros √© clonado, cria-se uma vers√£o dele em sua pr√≥pria conta do GitHub, sem afetar o reposit√≥rio original. Para que seja poss√≠vel adicionar colaboradores ao projeto, com direito de alterar os arquivos, √© necess√°rio indicar o usu√°rio em na op√ß√£o <code>Settings &gt; Collaborators</code>.</p>
</blockquote>
</section>
<section id="ollama" class="level3">
<h3 class="anchored" data-anchor-id="ollama">1.4 Ollama</h3>
<p>Ollama √© uma plataforma de c√≥digo aberto destinada √† execu√ß√£o de modelos de linguagem de larga escala localmente. A vantagem da plataforma, quando comparada √†s alternativas online (ChatGPT, Gemini, Claude etc.), consiste na dispensa de cria√ß√£o de contas, assinaturas ou compartilhamento de dados com as empresas propriet√°rias das plataformas.</p>
<p>Uma vez conclu√≠dos o <a href="%5BOllama%5D(https://ollama.com/download)"><em>download</em></a> e instala√ß√£o, procure o √≠cone da ‚Äúllama‚Äù e o execute ‚Äî barra de √≠cones ocultos no Windows (canto inferior direito) e barra superior do sistema, no macOS, pr√≥ximo ao volume, <em>Bluetooth</em> e rel√≥gio.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/areas-ollama.png" class="img-fluid figure-img"></p>
<figcaption>Interface de Ollama no Windows.</figcaption>
</figure>
</div>
<p>A tela acima tem tr√™s principais se√ß√µes:</p>
<ol type="1">
<li><strong>Hist√≥rico e nova conversa</strong>: lista dos <em>chats</em> anteriores e op√ß√£o de iniciar um novo. As configura√ß√µes de Ollama est√£o dispon√≠veis na parte inferior da lista de <em>chats</em>.</li>
<li><strong>Envio de mensagens</strong>: campo para a digita√ß√£o de <em>prompts</em>, por enquanto ainda restritos a textos. Outras ferramentas, como <a href="https://lmstudio.ai/">LM Studio</a>, permitem o envio de imagens e √°udio como <em>prompts</em> para os modelos locais.</li>
<li><strong>Sele√ß√£o do modelo</strong>: lista de modelos instalados no computador atual e op√ß√£o para buscar e baixar automaticamente outros dispon√≠veis no site de Ollama.</li>
</ol>
<p>Ao longo deste semin√°rio, utilizaremos dois modelos de linguagem, ambos abertos e mantidos pelo Google: <code>gemma3:1b</code> (recomendado para computadores com 4GB de RAM), <code>gemma3:4b</code> (acima de 8GB) e <code>embeddinggemma</code>. Para instal√°-los, digite seus nomes como indicados na campo dos modelos e aguarde as instala√ß√µes. Ao final do processo, voc√™ poder√° escrever <em>prompts</em> e testar as capacidades dos modelos:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/captura-gemma-teste.png" class="img-fluid figure-img"></p>
<figcaption>Teste de prompt com Ollama e Gemma.</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p><strong>Dica</strong>: Ollama √© carregado automaticamente quando seu computador inicia, seja Windows ou macOS, o que pode causar lentid√£o. Voc√™ pode desabilitar esta op√ß√£o nas prefer√™ncias do seu sistema operacional. Ao enviar o primeiro <em>prompt</em>, Ollama costuma demorar um pouco em fun√ß√£o do carregamento do modelo. As respostas subsequentes <em>tendem</em> a ser mais r√°pidas, dependendo da configura√ß√£o do seu computador.</p>
</blockquote>
<p><strong>Pronto!</strong> O ambiente de desenvolvimento do semin√°rio est√° totalmente configurado üòä</p>
</section>
<section id="executando-o-ambiente" class="level3">
<h3 class="anchored" data-anchor-id="executando-o-ambiente">1.5 Executando o ambiente</h3>
<p>As aulas do semin√°rio ser√£o baseadas em <em>notebooks</em>, que s√£o como cadernos de anota√ß√µes digitais para pesquisadores e analistas de dados. O editor Positron permite a cria√ß√£o e edi√ß√£o de <em>notebooks</em> interativos, isto √©, documentos que mesclam textos, imagens e c√≥digo execut√°vel. Al√©m disso, permite exportar <em>notebooks</em> em formatos como HTML, PDF e Microsoft Word, como se fossem artigos ou relat√≥rios de pesquisas.</p>
<p>Este documento √© um <em>notebook</em>: o arquivo <code>aula-01.ipynb</code> foi integralmente editado com Positron e cont√©m trechos execut√°veis de c√≥digo. Nos passos a seguir, faremos <em>download</em> do documento a partir do reposit√≥rio GitHub do semin√°rio e testaremos a execu√ß√£o de c√≥digo.</p>
<ol type="1">
<li>Acesse <a href="https://github.com/hugocristo/seminario-ia-dados">https://github.com/hugocristo/seminario-ia-dados</a></li>
<li>Clique no bot√£o <code>&lt;&gt; Code</code> e selecione a op√ß√£o <code>Open in GitHub Desktop</code></li>
<li>O navegador perguntar√° se deseja abrir o aplicativo GitHub Desktop. Aceite!</li>
<li>A tela exibida a seguir define em qual lugar do seu computador deseja salvar os arquivos do reposit√≥rio a ser clonado.</li>
<li>Selecione uma pasta f√°cil de localizar e clique em <code>clone</code>!</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/github-clonando.png" class="img-fluid figure-img"></p>
<figcaption>GitHub Desktop: sele√ß√£o da pasta de destino do reposit√≥rio.</figcaption>
</figure>
</div>
<p>Localize o editor Positron entre seus aplicativos e o execute. Em seguida, selecione a op√ß√£o <code>File &gt; Open Folder</code> e procure a pasta em que o reposit√≥rio foi salvo. A listagem dos arquivos das aulas ser√° exibida com a seguinte estrutura:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="./imagens/pastas.png" class="img-fluid figure-img"></p>
<figcaption>Conte√∫do do reposit√≥rio (Windows).</figcaption>
</figure>
</div>
<p>Ao selecionar a pasta <code>aula-01</code>, a listagem dos arquivos inclui: <em>notebook</em> da aula, <code>aula-01.ipynb</code>; o documento <code>aula-01.html</code>, que consiste no relat√≥rio gerado a partir do <em>notebook</em> no formato HTML; e duas pastas com imagens.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="./imagens/pastas-interno.png" class="img-fluid figure-img"></p>
<figcaption>Conte√∫do da pasta exibido no Positron (Windows).</figcaption>
</figure>
</div>
<p>Selecione o arquivo <code>aula-01.ipynb</code> e estar√° tudo pronto para iniciarmos os testes de execu√ß√£o do <em>notebook</em>.</p>
</section>
</section>
<section id="princ√≠pios-b√°sicos-de-programa√ß√£o-em-r-com-notebooks" class="level2">
<h2 class="anchored" data-anchor-id="princ√≠pios-b√°sicos-de-programa√ß√£o-em-r-com-notebooks">2. Princ√≠pios b√°sicos de programa√ß√£o em R com <em>notebooks</em></h2>
<p><em>Notebooks</em> s√£o documentos interativos que combinam e intercalam textos, imagens e trechos de c√≥digo. Diferentemente da programa√ß√£o tradicional em R, optamos por elaborar as an√°lises em doses pesquenas, como ‚Äúcolheres de ch√°‚Äù. Assim, podemos acompanhar a sequ√™ncia de transforma√ß√µes dos dados sem precisar ler c√≥digos extensos.</p>
<p>O trecho de c√≥digo a seguir ilustra a primeira diferen√ßa entre a execu√ß√£o de <em>notebooks</em> e a leitura dos relat√≥rios gerados. Se voc√™ est√° vendo este conte√∫do na p√°gina Web do reposit√≥rio GitHub, visualizar√° uma linha de c√≥digo R sem possibilidade de execu√ß√£o, mas com a op√ß√£o de copi√°-la e execut√°-la diretamente no console do R ou col√°-la em outro <em>script</em>.</p>
<div id="7acb539c" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="bu">print</span>(<span class="st">"Iniciando a programa√ß√£o em R!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Iniciando a programa√ß√£o em R!"</code></pre>
</div>
</div>
<p>Mas se voc√™ estiver no Positron, visualizar√° o bot√£o ‚ñ∑ (<em>run</em>/executar) ao lado esquerdo da c√©lula. Isto significa que se trata de um trecho de c√≥digo em R que pode ser executado. Os resultados da execu√ß√£o aparecem imediatamente a abaixo de cada c√©lula. Experimente!</p>
<div id="97c13982" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="bu">print</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>O c√≥digo acima parece com o primeiro, pois a fun√ß√£o <code>print()</code> √© a mesma. Ela serve para imprimir o argumento informado entre par√™nteses. No entanto, o conte√∫do entre par√™nteses em cada exemplo √© diferente: <code>"Iniciando a programa√ß√£o em R!"</code> e <code>2+2</code>.</p>
<p>A linguagem R tem fun√ß√µes para a exibi√ß√£o e manipula√ß√£o de diferentes tipos de dados, tais como caracteres, cadeias de caracteres (<em>strings</em> como a frase acima entre aspas), n√∫meros (como <code>2</code>), booleanos (verdadeiro/falso), vetores, matrizes e at√© documentos completos.</p>
<p>Podemos realizar opera√ß√µes aritm√©ticas sobre estes dados, como a soma acima, ou processar cadeias de caracteres. Por exemplo, podemos exibir apenas parte da frase anterior:</p>
<div id="63185a39" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>frase <span class="op">&lt;-</span> <span class="st">"Iniciando a programa√ß√£o em R!"</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>frase.pedaco <span class="op">&lt;-</span> substr(frase,<span class="dv">1</span>,<span class="dv">9</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="bu">print</span>(frase)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="bu">print</span>(frase.pedaco)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Iniciando a programa√ß√£o em R!"
[1] "Iniciando"</code></pre>
</div>
</div>
<p>A fun√ß√£o <code>substr()</code> (linha 2) recebe uma cadeia de caracteres como argumento e extrai uma parte dela a partir da posi√ß√£o fornecida ‚Äî <code>1</code> a <code>9</code>, correspondendo √† palavra ‚ÄúIniciando‚Äù da frase original.</p>
<p>A vari√°vel <code>frase</code> recebeu a frase inteira (linha 1), enquanto <code>frase.pedaco</code> recebeu os caracteres <code>1</code> a <code>9</code> extra√≠dos da primeira por meio de <code>substr()</code>. As linhas 3 e 4 exibem a diferen√ßa entre os resultados de <code>print()</code> para cada vari√°vel.</p>
<p>O processamento de dados no R √© basicamente este: cria√ß√£o de vari√°veis, manipula√ß√£o delas por meio de fun√ß√µes e estruturas de controle, visualiza√ß√£o dos resultados das opera√ß√µes em textos, gr√°ficos e tabelas.</p>
<section id="tipos-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-dados">2.1 Tipos de dados</h3>
<p>Nos exemplos anteriores, conhecemos dois principais tipos de dados: cadeias de caracteres (<em>strings</em>) e n√∫meros. Os exemplos a seguir ilustram estes e outros tipos dispon√≠veis.</p>
<blockquote class="blockquote">
<p><strong>Dica:</strong> coment√°rios em R s√£o iniciados por <code>#</code> e n√£o s√£o tratados como c√≥digo pelo interpretador da linguagem. Coment√°rios nos ajudam a entender o que partes espec√≠ficas do c√≥digo fazem.</p>
</blockquote>
<div id="915e9af3" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># imprime o n√∫mero dois</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="bu">print</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>O c√≥digo acima imprime o <em>n√∫mero</em> 2 (tipo <code>numeric</code>) enquanto o pr√≥ximo imprime o caractere ‚Äú2‚Äù (tipo <code>character</code>).</p>
<div id="11d257f6" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># imprime o caractere dois</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="bu">print</span>(<span class="st">"2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2"</code></pre>
</div>
</div>
<p>A diferen√ßa entre os dois casos est√° nas aspas da sa√≠da do segundo. Dados do tipo <code>character</code> sempre estar√£o entre aspas. A fun√ß√£o <code>class()</code> informa o tipo do dado fornecido como argumento.</p>
<div id="0ef9457f" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># tipo numeric</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="kw">class</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<div id="4ffb529c" class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># tipo character</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">class</span>(<span class="st">"2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div id="43797737" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># tipo logical</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">class</span>(FALSE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<p>O tipo <code>logical</code> inclui <code>NA</code>, que √© uma constante de comprimento 1 que indica valores ausentes. Ela √© muito importante para a detec√ß√£o de dados ausentes em bases de dados.</p>
<div id="9170effc" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">class</span>(NA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<section id="operadores" class="level4">
<h4 class="anchored" data-anchor-id="operadores">Operadores</h4>
<p>Quando o tipo √© <code>numeric</code>, podemos realizar opera√ß√µes aritm√©ticas:</p>
<div id="0a14ce35" class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># soma</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="dv">2</span><span class="op">+</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 4</code></pre>
</div>
</div>
<div id="52ec1ae2" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># subtra√ß√£o</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="dv">10</span><span class="op">-</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 5</code></pre>
</div>
</div>
<div id="ed8a0619" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># multiplica√ß√£o</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="dv">2</span><span class="op">*</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 20</code></pre>
</div>
</div>
<div id="0166cd19" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># divis√£o</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="dv">25</span><span class="op">/</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 5</code></pre>
</div>
</div>
<div id="71303a70" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># exponencia√ß√£o</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="dv">5</span><span class="op">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 25</code></pre>
</div>
</div>
<p>Para combinar todas as opera√ß√µes e visualizar os resultados de forma conjunta, precisamos utilizar a fun√ß√£o <code>print()</code>:</p>
<div id="61262997" class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># soma</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="bu">print</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>)</span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="co"># subtra√ß√£o</span></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="bu">print</span>(<span class="dv">10</span><span class="op">-</span><span class="dv">5</span>)</span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="co"># multiplica√ß√£o</span></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="bu">print</span>(<span class="dv">2</span><span class="op">*</span><span class="dv">10</span>)</span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co"># divis√£o</span></span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="bu">print</span>(<span class="dv">25</span><span class="op">/</span><span class="dv">5</span>)</span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="co"># exponencia√ß√£o</span></span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="bu">print</span>(<span class="dv">5</span><span class="op">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4
[1] 5
[1] 20
[1] 5
[1] 25</code></pre>
</div>
</div>
<p>Os tipos l√≥gicos nos informam se um dado teste √© verdadeiro ou falso (<code>TRUE</code> ou <code>FALSE</code>):</p>
<div id="761c3da7" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># dois √© menor do que quatro?</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="dv">2</span> <span class="op">&lt;</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>E dois textos s√£o iguais? (Observe o sinal <code>==</code> para compara√ß√£o)</p>
<div id="6b7a38d9" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="co">"Linguagem R"</span> <span class="op">==</span> <span class="st">"Linguagem Python"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="tudo-s√£o-vetores" class="level4">
<h4 class="anchored" data-anchor-id="tudo-s√£o-vetores">Tudo s√£o vetores</h4>
<p>Em R, tudo s√£o <em>vetores</em> e h√° mecanismos simples para ger√°-los. O operador <code>:</code> define o intervalo (fechado) inferior e superior da sequ√™ncia:</p>
<div id="8b97bd2a" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># gera a sequ√™ncia [1,100]</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="dv">1</span>:<span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19
 [20]  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38
 [39]  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57
 [58]  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76
 [77]  77  78  79  80  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95
 [96]  96  97  98  99 100</code></pre>
</div>
</div>
<p>Ao executarmos o c√≥digo, R sinaliza os resultados por n√∫meros entre colchetes (p.ex., <code>[1]</code> e <code>[19]</code> no exemplo acima), facilitando a identifica√ß√£o dos resultados parciais de cada opera√ß√£o.</p>
<p>A fun√ß√£o <code>seq()</code> √© semelhante ao operador <code>:</code>, por√©m permite definir o <em>passo</em> da sequ√™ncia:</p>
<div id="6bd07d0c" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># sequ√™ncia de 01 a 100, de 5 em 5 n√∫meros</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>seq(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code> [1]   0   5  10  15  20  25  30  35  40  45  50  55  60  65  70  75  80  85  90  95
[21] 100</code></pre>
</div>
</div>
<p>Podemos compor vetores manualmente por meio da fun√ß√£o <code>c()</code>:</p>
<div id="ddbb9909" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>c(<span class="st">"Piaget"</span>, <span class="st">"Vygotsky"</span>, <span class="st">"Skinner"</span>, <span class="st">"Wallon"</span>, <span class="st">"Bronfenbrenner"</span>, <span class="st">"Gibson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "Piaget"         "Vygotsky"       "Skinner"        "Wallon"        
[5] "Bronfenbrenner" "Gibson"        </code></pre>
</div>
</div>
<p>Veja que ‚ÄúWallon‚Äù √© o item <strong>4</strong> do vetor e ‚ÄúBronfrenbrenner‚Äù √© o item <strong>5</strong>. A numera√ß√£o entre colchetes o in√≠cio da linha auxilia esta identifica√ß√£o.</p>
<p>Vetores e estruturas compostas de dados em R sempre se iniciam pelo √≠ndice <strong>1</strong>, op√ß√£o distinta da maioria das linguagens de programa√ß√£o, que iniciam em zero.</p>
<p>Para manipular vetores, o ideal √© atribu√≠-los a vari√°veis. O sinal de atribui√ß√£o √© <code>&lt;-</code> e remete a uma seta com a dire√ß√£o da opera√ß√£o.</p>
<div id="8cd37fa4" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># atribui o vetor √† vari√°vel 'psicologos'</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>psicologos <span class="op">&lt;-</span> c(<span class="st">"Piaget"</span>, <span class="st">"Vygotsky"</span>, <span class="st">"Skinner"</span>, <span class="st">"Wallon"</span>, <span class="st">"Bronfenbrenner"</span>, <span class="st">"Gibson"</span>)</span>
<span id="cb41-3"><a href="#cb41-3"></a><span class="co"># imprime vetor completo</span></span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="bu">print</span>(psicologos)</span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="co"># imprime item 3 do vetor (Skinner)</span></span>
<span id="cb41-6"><a href="#cb41-6"></a><span class="bu">print</span>(psicologos[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Piaget"         "Vygotsky"       "Skinner"        "Wallon"        
[5] "Bronfenbrenner" "Gibson"        
[1] "Skinner"</code></pre>
</div>
</div>
<p>Podemos alterar o item da mesma forma:</p>
<div id="7c061203" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># altera 'Skinner' para 'B. F. Skinner'</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>psicologos[<span class="dv">3</span>] <span class="op">&lt;-</span> <span class="st">"B. F. Skinner"</span></span>
<span id="cb43-3"><a href="#cb43-3"></a><span class="co"># imprime vetor atualizado</span></span>
<span id="cb43-4"><a href="#cb43-4"></a><span class="bu">print</span>(psicologos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Piaget"         "Vygotsky"       "B. F. Skinner"  "Wallon"        
[5] "Bronfenbrenner" "Gibson"        </code></pre>
</div>
</div>
<p>Vetores tamb√©m podem ser num√©ricos ou booleanos:</p>
<div id="ccf23fd7" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># vetor com idades</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>idade <span class="op">&lt;-</span> c(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">17</span>, <span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">16</span>)</span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="bu">print</span>(idade)</span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="co"># vetor com verdadeiro/falso</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>booleano <span class="op">&lt;-</span> c(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, TRUE, TRUE, FALSE, FALSE)</span>
<span id="cb45-6"><a href="#cb45-6"></a><span class="bu">print</span>(booleano)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 15 16 14 17 15 18 16 15 14 16
 [1]  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>Assim como fizemos com cadeias de caracteres, podemos exibir itens espec√≠ficos e alterar vetores num√©ricos:</p>
<div id="3519c0c3" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># imprime item 1</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="bu">print</span>(idade[<span class="dv">1</span>])</span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="co"># altera item 1</span></span>
<span id="cb47-4"><a href="#cb47-4"></a>idade[<span class="dv">1</span>] <span class="op">&lt;-</span> <span class="dv">16</span></span>
<span id="cb47-5"><a href="#cb47-5"></a><span class="co"># imprime conjunto alterado</span></span>
<span id="cb47-6"><a href="#cb47-6"></a><span class="bu">print</span>(idade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15
 [1] 16 16 14 17 15 18 16 15 14 16</code></pre>
</div>
</div>
<p>Podemos fazer opera√ß√µes aritm√©ticas com vetores n√∫mericos:</p>
<div id="6ecd8f12" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># soma as idades </span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="bu">print</span>(<span class="bu">sum</span>(idade))</span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="co"># multiplica todas as idades por 10 (sem alter√°-las)</span></span>
<span id="cb49-4"><a href="#cb49-4"></a><span class="bu">print</span>(idade<span class="op">*</span><span class="dv">10</span>)</span>
<span id="cb49-5"><a href="#cb49-5"></a><span class="co"># m√©dia do vetor das idades</span></span>
<span id="cb49-6"><a href="#cb49-6"></a><span class="bu">print</span>(mean(idade))</span>
<span id="cb49-7"><a href="#cb49-7"></a><span class="co"># mediana do vetor das idades </span></span>
<span id="cb49-8"><a href="#cb49-8"></a><span class="bu">print</span>(median(idade)) </span>
<span id="cb49-9"><a href="#cb49-9"></a><span class="co"># desvio padr√£o do vetor das idades (sd, standard deviation)</span></span>
<span id="cb49-10"><a href="#cb49-10"></a><span class="bu">print</span>(sd(idade))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 157
 [1] 160 160 140 170 150 180 160 150 140 160
[1] 15.7
[1] 16
[1] 1.251666</code></pre>
</div>
</div>
<p>A facilidade de manipula√ß√£o de vetores √© a base do uso de R para an√°lise de dados. Os n√≠veis das vari√°veis observadas em nossos estudos (p.ex., idade, g√™nero, documentos, frequ√™ncias) s√£o itens de vetores e cada observa√ß√£o (participante, situa√ß√£o, documento etc.) corresponde a um item em um ou mais vetores dados.</p>
</section>
<section id="data-frames" class="level4">
<h4 class="anchored" data-anchor-id="data-frames">Data Frames</h4>
<p>Objetos do tipo <code>data.frame</code> em R s√£o cole√ß√µes de vari√°veis cuja manipula√ß√£o √© semelhante √† de planilhas do Microsoft Excel. Colunas e linhas podem ser rotuladas, facilitando a identifica√ß√£o das vari√°veis, e todas as opera√ß√µes com vetores ilustradas anteriormente tamb√©m se aplicam ao tipo <code>data.frame</code>.</p>
<div id="931842a6" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># cria um data.frame a partir dos dois vetores anteriores</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>base <span class="op">&lt;-</span> data.frame(</span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="st">"idade"</span><span class="op">=</span>idade,</span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="st">"presente"</span><span class="op">=</span>booleano)</span>
<span id="cb51-5"><a href="#cb51-5"></a></span>
<span id="cb51-6"><a href="#cb51-6"></a><span class="co"># exibe data.frame</span></span>
<span id="cb51-7"><a href="#cb51-7"></a>View(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O objeto <code>base</code> √© um <code>data.frame</code> com duas colunas, <em>idades</em> e <em>presen√ßa</em>, constru√≠das a partir dos vetores <code>idades</code> e <code>booleano</code> que utilizamos anteriormente. Suponha que <code>base</code> √© uma lista de presen√ßa em que registramos as idades de estudantes e a presen√ßa deles em um dado evento.</p>
<p>A chamada <code>View(base)</code> (linha 7) abre sua estrutura em uma nova aba, como na imagem seguinte:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/data-frame.png" class="img-fluid figure-img"></p>
<figcaption>Visualiza√ß√£o do <code>data.frame</code>.</figcaption>
</figure>
</div>
<p>Na parte esquerda da visualiza√ß√£o, Positron exibe o <em>histograma</em> de cada vari√°vel, exibindo a distribui√ß√£o de seus n√≠veis e estat√≠sticas descritivas relevantes: dados ausentes, valor m√≠nimo, mediana, m√©dia, valor m√°ximo e desvio padr√£o. O √≠cone √† esquerda do r√≥tulo de cada vari√°vel indica seu tipo, por exemplo: <code>#</code> para <code>numeric</code>.</p>
<p>A parte direita da visualiza√ß√£o √© similar a uma planilha do Microsoft Excel, com as colunas (vari√°veis, com tipos) e linhas (observa√ß√µes). O tipo <code>dbl</code> para <em>idades</em> significa <em>double</em>, uma variante da representa√ß√£o de <code>numeric</code> do pacote <a href="https://tibble.tidyverse.org/articles/types.html">tibble</a> utilizado na constru√ß√£o de Positron. J√° <code>lgl</code> √© a indica√ß√£o do tipo <code>logical</code>.</p>
</section>
</section>
<section id="fun√ß√µes" class="level3">
<h3 class="anchored" data-anchor-id="fun√ß√µes">2.2 Fun√ß√µes</h3>
<p>At√© o momento, utilizamos o termo <em>fun√ß√£o</em> de modo intuitivo. Podemos entend√™-las como procedimentos que realizam opera√ß√µes sobre dados e que podem receber argumentos ou n√£o.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co"># sem argumentos</span></span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">funcao</span>()</span>
<span id="cb52-3"><a href="#cb52-3"></a></span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="co"># um ou mais argumentos</span></span>
<span id="cb52-5"><a href="#cb52-5"></a><span class="fu">funcao</span>(argumento1, argumento2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Os argumentos da fun√ß√£o s√£o informados entre par√™nteses, separados por v√≠rgulas, e as opera√ß√µes que ela realiza internamente se chamam <em>corpo</em>. At√© o momento utilizamos fun√ß√µes com um argumento‚Ä¶</p>
<div id="45f369d2" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># um argumento</span></span>
<span id="cb53-2"><a href="#cb53-2"></a><span class="bu">print</span>(<span class="st">"Esta √© uma fun√ß√£o de argumento √∫nico!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Esta √© uma fun√ß√£o de argumento √∫nico!"</code></pre>
</div>
</div>
<p>A fun√ß√£o <code>mean()</code> pode ser utilizada com um √∫nico argumento (vetor) e pode receber adicionais que ajustam sua opera√ß√£o. Estes argumentos podem ou n√£o ser identificados, pois a linguagem tenta interpret√°-los em tempo de execu√ß√£o. O argumento <code>na.rm</code> com valor <code>TRUE</code> informa √† fun√ß√£o que deve <em>remover</em> as c√©lulas vazias do c√°lculo da m√©dia. Quando o valor for <code>FALSE</code>, a fun√ß√£o retornar√° um erro ao calcular m√©dias com c√©lulas vazias.</p>
<div id="f8a1343d" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># dois argumentos</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>mean(idade, na.rm <span class="op">=</span> TRUE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 15.7</code></pre>
</div>
</div>
<p>J√° a fun√ß√£o <code>c()</code>, que constr√≥i vetores, pode receber in√∫meros argumentos:</p>
<div id="591dfbcf" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a><span class="co"># vetor com dez argumentos</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>c(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">14</span>, <span class="dv">17</span>, <span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code> [1] 15 16 14 17 15 18 16 15 14 16</code></pre>
</div>
</div>
<p>O console de Positron permite invocar a ajuda de todas as fun√ß√µes da linguagem e dos pacotes adicionais por meio da combina√ß√£o do s√≠mbolo <code>?</code> e o nome da fun√ß√£o.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>?print</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><strong>Dica</strong>: A ajuda exibida com a execu√ß√£o deste comando √© similar √†quela exibida quando come√ßamos a digitar o nome da fun√ß√£o nas c√©lulas de c√≥digo, por√© mais completa e inclui exemplos.</p>
</blockquote>
<p>H√° fun√ß√µes de prop√≥sito geral para exibi√ß√£o de textos em R, que nos ajudam a inspecionar objetos em uso pelo <em>script</em>.</p>
<ul>
<li><code>print()</code>: imprime no console (ou <em>notebook</em>) uma <em>string</em>, o valor de uma vari√°vel, uma express√£o‚Ä¶</li>
<li><code>cat()</code>: semelhante a <code>print()</code>, por√©m com a op√ß√£o de concatenar tipos de dados separados por espa√ßo. Requer quebra de linha expl√≠cita ao final (<code>\n</code>);</li>
<li><code>substr()</code>: extrai caracteres de uma <em>string</em>;</li>
<li><code>paste()</code>: concatena duas ou mais <em>strings</em>;</li>
<li><code>length()</code>: retorna o comprimento de vetores;</li>
<li><code>nchar()</code>: retorna o comprimento de <em>strings</em>;</li>
<li><code>unique()</code>: retorna os valores √∫nicos de um vetor (inclusive n√∫meros).</li>
</ul>
<div id="a97f214d" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a><span class="co"># imprime texto, n√∫mero e vetor</span></span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="bu">print</span>(<span class="st">"Sa√≠da de texto"</span>)</span>
<span id="cb60-3"><a href="#cb60-3"></a><span class="bu">print</span>(<span class="fl">3.14</span>)</span>
<span id="cb60-4"><a href="#cb60-4"></a><span class="bu">print</span>(idade)</span>
<span id="cb60-5"><a href="#cb60-5"></a><span class="co"># concatena texto e vetor e termina com quebra de linha</span></span>
<span id="cb60-6"><a href="#cb60-6"></a>cat(<span class="st">"O conte√∫do do vetor de idades √©:"</span>,idade,<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb60-7"><a href="#cb60-7"></a><span class="co"># extrai e imprime os caracteres de 18 a 27</span></span>
<span id="cb60-8"><a href="#cb60-8"></a><span class="bu">print</span>(substr(<span class="st">"Extraindo apenas esta parte"</span>,<span class="dv">18</span>,<span class="dv">27</span>))</span>
<span id="cb60-9"><a href="#cb60-9"></a><span class="co"># retorna o comprimento do vetor idade (10 itens)</span></span>
<span id="cb60-10"><a href="#cb60-10"></a><span class="bu">print</span>(length(idade))</span>
<span id="cb60-11"><a href="#cb60-11"></a><span class="co"># retorna o comprimento de uma string (37 caracteres)</span></span>
<span id="cb60-12"><a href="#cb60-12"></a><span class="bu">print</span>(nchar(<span class="st">"Esta √© uma fun√ß√£o de argumento √∫nico!"</span>))</span>
<span id="cb60-13"><a href="#cb60-13"></a><span class="co"># concatena strings</span></span>
<span id="cb60-14"><a href="#cb60-14"></a><span class="bu">print</span>(paste(<span class="st">"A primeira parte"</span>,<span class="st">"e a segunda parte"</span>,<span class="st">"e a terceira parte."</span>))</span>
<span id="cb60-15"><a href="#cb60-15"></a><span class="co"># mostra idades √∫nicas</span></span>
<span id="cb60-16"><a href="#cb60-16"></a><span class="bu">print</span>(unique(idade))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sa√≠da de texto"
[1] 3.14
 [1] 16 16 14 17 15 18 16 15 14 16
O conte√∫do do vetor de idades √©: 16 16 14 17 15 18 16 15 14 16 
[1] "esta parte"
[1] 10
[1] 37
[1] "A primeira parte e a segunda parte e a terceira parte."
[1] 16 14 17 15 18</code></pre>
</div>
</div>
<p>Algumas fun√ß√µes da linguagem R nos ajudam a explorar a estrutura de <code>data.frames</code>:</p>
<ul>
<li><code>summary()</code>: medidas-resumo da base;</li>
<li><code>head()</code>: primeiras linhas;</li>
<li><code>tail()</code>: √∫ltimas linhas;</li>
<li><code>nrow()</code>: n√∫mero de linhas;</li>
<li><code>ncol()</code>: n√∫mero de colunas;</li>
<li><code>colnames()</code>: r√≥tulos das colunas;</li>
<li><code>rownames()</code>: r√≥tulos das linhas (quando n√£o houver, retornar√° <em>strings</em> com n√∫meros).</li>
</ul>
<div id="7f95c52b" class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># resumo</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>summary(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>     idade       presente      
 Min.   :14.0   Mode :logical  
 1st Qu.:15.0   FALSE:6        
 Median :16.0   TRUE :4        
 Mean   :15.7                  
 3rd Qu.:16.0                  
 Max.   :18.0                  </code></pre>
</div>
</div>
<div id="113705a7" class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1"></a><span class="co"># cabe√ßa</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>head(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>  idade presente
1    16     TRUE
2    16    FALSE
3    14    FALSE
4    17     TRUE
5    15    FALSE
6    18    FALSE</code></pre>
</div>
</div>
<div id="d09853e3" class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1"></a><span class="co"># cauda</span></span>
<span id="cb66-2"><a href="#cb66-2"></a>tail(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>   idade presente
5     15    FALSE
6     18    FALSE
7     16     TRUE
8     15     TRUE
9     14    FALSE
10    16    FALSE</code></pre>
</div>
</div>
<div id="0aa02145" class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1"></a><span class="co"># n√∫mero de linhas</span></span>
<span id="cb68-2"><a href="#cb68-2"></a>nrow(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 10</code></pre>
</div>
</div>
<div id="0ced6031" class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1"></a><span class="co"># n√∫mero de colunas</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>ncol(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] 2</code></pre>
</div>
</div>
<div id="cf348835" class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1"></a><span class="co"># r√≥tulos das colunas</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>colnames(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>[1] "idade"    "presente"</code></pre>
</div>
</div>
<div id="29376605" class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1"></a><span class="co"># r√≥tulos das linhas</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>rownames(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"</code></pre>
</div>
</div>
<p>A fun√ß√£o <code>hist()</code> gera um histograma a partir da vari√°vel <em>idade</em> do <code>data.frame</code>. Para isso, recebe como argumentos um vetor de dados e um t√≠tulo (argumento <code>main</code>). O seletor <code>$</code> indica qual coluna de <code>base</code> ser√° utilizada na visualiza√ß√£o.</p>
<div id="024e7085" class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1"></a><span class="co"># plota histograma</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>hist(base$idade, main<span class="op">=</span><span class="st">"Histograma das idades"</span>, xlab<span class="op">=</span><span class="st">"Idades"</span>,ylab<span class="op">=</span><span class="st">"Frequ√™ncia"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="aula-01_files/figure-html/cell-39-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>A fun√ß√£o <code>as.factor()</code> converte os n√≠veis de var√≠aveis (colunas) de <code>data.frames</code> para categorias. No exemplo a seguir, coluna <em>presente</em> √© transformada em categorias (<code>TRUE</code> e <code>FALSE</code>) e exibe a distribui√ß√µes das idades em cada uma delas.</p>
<div id="037cef5a" class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1"></a><span class="co"># transforma TRUE/FALSE em categoria</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>base$presente <span class="op">&lt;-</span> <span class="im">as</span>.factor(base$presente)</span>
<span id="cb77-3"><a href="#cb77-3"></a><span class="co"># exibe boxplot</span></span>
<span id="cb77-4"><a href="#cb77-4"></a>plot(x<span class="op">=</span>base$presente,y<span class="op">=</span>base$idade, main<span class="op">=</span><span class="st">"Boxplot Presen√ßa x Idade"</span>, xlab<span class="op">=</span><span class="st">"Presente"</span>, ylab<span class="op">=</span><span class="st">"Idade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="aula-01_files/figure-html/cell-40-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Vamos adicionar mais um vetor de dados ao objeto <code>base</code> para testar a visualiza√ß√£o em gr√°ficos de dispers√£o. Para isso, utilizaremos a fun√ß√£o <code>cbind()</code>, que adiciona uma nova coluna a <code>data.frames</code> existentes.</p>
<div id="5cab5059" class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1"></a><span class="co"># novo vetor de dados com 10 alturas</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>altura <span class="op">&lt;-</span> c(<span class="fl">1.75</span>, <span class="fl">1.60</span>, <span class="fl">1.64</span>, <span class="fl">1.70</span>, <span class="fl">1.81</span>, <span class="fl">1.63</span>, <span class="fl">1.72</span>, <span class="fl">1.85</span>, <span class="fl">1.75</span>, <span class="fl">1.55</span>)</span>
<span id="cb78-3"><a href="#cb78-3"></a><span class="co"># adiciona coluna</span></span>
<span id="cb78-4"><a href="#cb78-4"></a>base <span class="op">&lt;-</span> cbind(base, <span class="st">"altura"</span><span class="op">=</span>altura)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O resultado √© <code>base</code> atualizada para incluir mais uma coluna:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/base-cbind.png" class="img-fluid figure-img"></p>
<figcaption>Exibi√ß√£o de coluna adicional de <code>base</code>.</figcaption>
</figure>
</div>
<p>Assim, podemos visualizar o gr√°fico de dispers√£o de <em>idade</em> versus <em>altura</em>:</p>
<div id="17e0c4d9" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1"></a><span class="co"># plota idade x altura</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>plot(base$idade, base$altura, main<span class="op">=</span><span class="st">"Idade x altura"</span>, xlab<span class="op">=</span><span class="st">"Idade"</span>, ylab<span class="op">=</span><span class="st">"Altura"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="aula-01_files/figure-html/cell-42-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Dica</strong>: a adi√ß√£o de novas colunas a <code>data.frames</code> existentes exige que o vetor tenha o <em>mesmo n√∫mero</em> de linhas.</p>
</blockquote>
<p>Tamb√©m √© poss√≠vel fazer a adi√ß√£o utilizando o seletor <code>$</code>, mas para testar esta alternativa, vamos remover a coluna adicionada:</p>
<div id="e9039e3f" class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1"></a><span class="co"># remove coluna altura adicionada anteriormente</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>base$altura <span class="op">&lt;-</span> NULL</span>
<span id="cb80-3"><a href="#cb80-3"></a><span class="co"># verifica a remo√ß√£o</span></span>
<span id="cb80-4"><a href="#cb80-4"></a>View(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Adi√ß√£o por meio do seletor:</p>
<div id="ea486662" class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1"></a><span class="co"># adiciona novamente utilizando o seletor</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>base$altura <span class="op">&lt;-</span> c(<span class="fl">1.75</span>, <span class="fl">1.60</span>, <span class="fl">1.64</span>, <span class="fl">1.70</span>, <span class="fl">1.81</span>, <span class="fl">1.63</span>, <span class="fl">1.72</span>, <span class="fl">1.85</span>, <span class="fl">1.75</span>, <span class="fl">1.55</span>)</span>
<span id="cb81-3"><a href="#cb81-3"></a><span class="co"># visualiza</span></span>
<span id="cb81-4"><a href="#cb81-4"></a>View(base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Dica</strong>: √© uma boa pr√°tica <em>inicializar</em> a coluna, com valores vazios, antes de atribuir valores, caso isso seja feito por meio do seletor <code>$</code>. Isso evita avisos do R quanto √† tentativa de manipular colunas n√£o existentes.</p>
</blockquote>
<div id="6ef2f118" class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1"></a><span class="co"># remove coluna altura adicionada anteriormente</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>base$altura <span class="op">&lt;-</span> NULL</span>
<span id="cb82-3"><a href="#cb82-3"></a><span class="co"># adiciona a coluna com valores vazios (NA)</span></span>
<span id="cb82-4"><a href="#cb82-4"></a>base$altura <span class="op">&lt;-</span> NA</span>
<span id="cb82-5"><a href="#cb82-5"></a><span class="co"># adiciona novamente utilizando o seletor</span></span>
<span id="cb82-6"><a href="#cb82-6"></a>base$altura <span class="op">&lt;-</span> c(<span class="fl">1.75</span>, <span class="fl">1.60</span>, <span class="fl">1.64</span>, <span class="fl">1.70</span>, <span class="fl">1.81</span>, <span class="fl">1.63</span>, <span class="fl">1.72</span>, <span class="fl">1.85</span>, <span class="fl">1.75</span>, <span class="fl">1.55</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="estruturas-de-controle" class="level3">
<h3 class="anchored" data-anchor-id="estruturas-de-controle">2.3 Estruturas de controle</h3>
<p><em>La√ßos</em> s√£o estruturas que permitem repetir conjuntos de instru√ß√µes por <em>n</em> vezes, facilitando a varredura de vetores e <code>data.frames</code> para realizar opera√ß√µes, ler ou alterar elementos. H√° dois principais tipos de la√ßos em R:</p>
<ol type="1">
<li><code>for(express√£o){...}</code>: estabelece um contador progressivo ou regressivo, por meio da express√£o entre par√¢nteses, para a execu√ß√£o de opera√ß√µes indicadas entre chaves;</li>
<li><code>while(express√£o){...}</code>: executa opera√ß√µes at√© que a condi√ß√£o estabelecida pela express√£o entre par√™nteses seja satisfeita.</li>
</ol>
<div id="dca17f3d" class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1"></a><span class="co"># lista psic√≥logos do vetor pelo √≠ndice do item</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="co"># 'item' ser√° 1, 2, 3, ...</span></span>
<span id="cb83-3"><a href="#cb83-3"></a><span class="cf">for</span> (item <span class="kw">in</span> <span class="dv">1</span>:length(psicologos)) {</span>
<span id="cb83-4"><a href="#cb83-4"></a>  <span class="bu">print</span>(psicologos[item])</span>
<span id="cb83-5"><a href="#cb83-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Piaget"
[1] "Vygotsky"
[1] "B. F. Skinner"
[1] "Wallon"
[1] "Bronfenbrenner"
[1] "Gibson"</code></pre>
</div>
</div>
<div id="2fbe0f6f" class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1"></a><span class="co"># lista psic√≥logos do vetor pelo item</span></span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="co"># neste caso, 'item' recebe o valor do item, n√£o o √≠ndice</span></span>
<span id="cb85-3"><a href="#cb85-3"></a><span class="co"># item ser√° "Piaget", "Vygotsky", ...</span></span>
<span id="cb85-4"><a href="#cb85-4"></a><span class="cf">for</span> (item <span class="kw">in</span> psicologos) {</span>
<span id="cb85-5"><a href="#cb85-5"></a>  <span class="bu">print</span>(item)</span>
<span id="cb85-6"><a href="#cb85-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Piaget"
[1] "Vygotsky"
[1] "B. F. Skinner"
[1] "Wallon"
[1] "Bronfenbrenner"
[1] "Gibson"</code></pre>
</div>
</div>
<div id="8cc6168c" class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1"></a><span class="co"># lista idade e altura do data.frame</span></span>
<span id="cb87-2"><a href="#cb87-2"></a><span class="cf">for</span> (linha <span class="kw">in</span> <span class="dv">1</span>:nrow(base)) {</span>
<span id="cb87-3"><a href="#cb87-3"></a>  <span class="co"># imprime linha</span></span>
<span id="cb87-4"><a href="#cb87-4"></a>  cat(<span class="st">"idade:"</span>,base$idade[linha],<span class="st">"altura:"</span>,base$altura[linha],<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb87-5"><a href="#cb87-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>idade: 16 altura: 1.75 
idade: 16 altura: 1.6 
idade: 14 altura: 1.64 
idade: 17 altura: 1.7 
idade: 15 altura: 1.81 
idade: 18 altura: 1.63 
idade: 16 altura: 1.72 
idade: 15 altura: 1.85 
idade: 14 altura: 1.75 
idade: 16 altura: 1.55 </code></pre>
</div>
</div>
<div id="555e36c8" class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1"></a><span class="co"># varre o data.frame at√© que encontre uma idade igual ou maior a 18</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>testa.idade <span class="op">&lt;-</span> <span class="dv">0</span></span>
<span id="cb89-3"><a href="#cb89-3"></a><span class="co"># come√ßa pela primeira linha</span></span>
<span id="cb89-4"><a href="#cb89-4"></a>linha <span class="op">&lt;-</span> <span class="dv">1</span></span>
<span id="cb89-5"><a href="#cb89-5"></a><span class="cf">while</span> (testa.idade <span class="op">&lt;</span> <span class="dv">18</span>) {</span>
<span id="cb89-6"><a href="#cb89-6"></a>  <span class="co"># atribui valor ao teste</span></span>
<span id="cb89-7"><a href="#cb89-7"></a>  testa.idade <span class="op">&lt;-</span> base$idade[linha]</span>
<span id="cb89-8"><a href="#cb89-8"></a>  <span class="co"># imprime</span></span>
<span id="cb89-9"><a href="#cb89-9"></a>  cat(<span class="st">"idade:"</span>,base$idade[linha],<span class="st">"altura:"</span>,base$altura[linha],<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb89-10"><a href="#cb89-10"></a>  <span class="co"># avan√ßa para a pr√≥xima linha</span></span>
<span id="cb89-11"><a href="#cb89-11"></a>  linha <span class="op">&lt;-</span> linha <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb89-12"><a href="#cb89-12"></a>}</span>
<span id="cb89-13"><a href="#cb89-13"></a><span class="co"># avisa que a idade foi encontrada</span></span>
<span id="cb89-14"><a href="#cb89-14"></a>cat(<span class="st">"Encontrei!</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>idade: 16 altura: 1.75 
idade: 16 altura: 1.6 
idade: 14 altura: 1.64 
idade: 17 altura: 1.7 
idade: 15 altura: 1.81 
idade: 18 altura: 1.63 
Encontrei!</code></pre>
</div>
</div>
<div id="8e96a8f8" class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1"></a><span class="co"># altera nomes dos psic√≥logos do vetor</span></span>
<span id="cb91-2"><a href="#cb91-2"></a><span class="cf">for</span> (item <span class="kw">in</span> <span class="dv">1</span>:length(psicologos)) {</span>
<span id="cb91-3"><a href="#cb91-3"></a>  <span class="co"># concatena 'Prof.' ao nome do psic√≥logo</span></span>
<span id="cb91-4"><a href="#cb91-4"></a>  psicologos[item] <span class="op">&lt;-</span> paste(<span class="st">"Prof."</span>,psicologos[item])</span>
<span id="cb91-5"><a href="#cb91-5"></a>}</span>
<span id="cb91-6"><a href="#cb91-6"></a><span class="co"># imprime resultado</span></span>
<span id="cb91-7"><a href="#cb91-7"></a><span class="bu">print</span>(psicologos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Prof. Piaget"         "Prof. Vygotsky"       "Prof. B. F. Skinner" 
[4] "Prof. Wallon"         "Prof. Bronfenbrenner" "Prof. Gibson"        </code></pre>
</div>
</div>
</section>
</section>
<section id="importa√ß√£o-e-processamento-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="importa√ß√£o-e-processamento-de-dados">3. Importa√ß√£o e processamento de dados</h2>
<p>H√° diferentes formatos de bases de dados, dentre as quais destacam-se <code>TXT</code> (formato texto), <code>CSV</code> (<em>comma-separated values</em>) e <code>XLSX</code> (Microsoft Excel). Os dois primeiros s√£o de simples manipula√ß√£o em R, enquanto o √∫ltimo requer recursos n√£o nativos da linguagem, que podem ser incorporados por meio de <em>pacotes</em>. Estes adicionam recursos extras ao R, aumentando a capacidade de importar e processar dados, realizar infer√™ncias estat√≠sticas e gerar gr√°ficos.</p>
<p>O carregamento de pacotes ocorre em duas etapas:</p>
<ol type="1">
<li><code>install.packages()</code> solicita ao editor que fa√ßa o <em>download</em> e instale o pacote informado entre par√™nteses;</li>
<li><code>library()</code> carrega o pacote e torna suas fun√ß√µes dispon√≠veis para o <em>script</em> ou <em>notebook</em> atual.</li>
</ol>
<p>Se o pacote j√° estiver instalado e a fun√ß√£o <code>install.packages()</code> for invocada, o ambiente R ignorar√° o comando. O mesmo ocorre com a fun√ß√£o <code>library()</code>, de modo que a recomenda√ß√£o √© manter essas instru√ß√µes no in√≠cio do programa.</p>
<section id="arquivos-texto-txt-csv-etc." class="level3">
<h3 class="anchored" data-anchor-id="arquivos-texto-txt-csv-etc.">3.1 Arquivos texto (TXT, CSV etc.)</h3>
<p>Arquivos <code>CSV</code> s√£o utilizados pelo poder p√∫blico e em acervos abertos para a distribui√ß√£o de bases de dados de diversas √°reas. √â poss√≠vel editar esses arquivos em ferramentas como Microsoft Excel, Open Office e Google Planilhas. Por se tratarem de texto puro, os arquivos costumam ser maiores e podem apresentar limita√ß√µes quanto √† acentua√ß√£o e uso de caracteres especiais.</p>
<p>Em R, a leitura de arquivos CSV √© feita pela fun√ß√£o <code>read.csv()</code>, que precisa da defini√ß√£o de tr√™s principais argumentos:</p>
<ul>
<li><code>file</code>: nome do arquivo, incluindo caminho;</li>
<li><code>header</code>: quando <code>TRUE</code>, considera que a primeira linha cont√©m os r√≥tulos das colunas;</li>
<li><code>sep</code> : informa o separador dos campos (v√≠rgula, ponto e v√≠rgula ou tabula√ß√£o).</li>
</ul>
<p>O exemplo de c√≥digo abaixo carrega o arquivo <code>covid-es.csv</code> localizado na pasta <code>dados</code> que acompanha este <em>notebook</em>. A planilha consiste em dados sobre casos e √≥bitos por Covid-19 entre mar√ßo de outubro de 2020 no ES.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./imagens/csv.png" class="img-fluid figure-img"></p>
<figcaption>Primeiras linhas de <code>covid-es.csv</code>.</figcaption>
</figure>
</div>
<div id="ff420477" class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1"></a><span class="co"># carrega arquivo covid-es.csv</span></span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="co"># separador ; (ponto e v√≠rgula)</span></span>
<span id="cb93-3"><a href="#cb93-3"></a><span class="co"># primeira linha tem cabe√ßalhos</span></span>
<span id="cb93-4"><a href="#cb93-4"></a>base.covid <span class="op">&lt;-</span> read.csv(<span class="bu">file</span><span class="op">=</span><span class="st">"./dados/covid-es.csv"</span>,sep<span class="op">=</span><span class="st">";"</span>,header<span class="op">=</span>TRUE)</span>
<span id="cb93-5"><a href="#cb93-5"></a><span class="co"># visualiza data.frame</span></span>
<span id="cb93-6"><a href="#cb93-6"></a>View(base.covid)</span>
<span id="cb93-7"><a href="#cb93-7"></a><span class="co"># explora a base</span></span>
<span id="cb93-8"><a href="#cb93-8"></a>summary(base.covid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>     date              state               name                code        
 Length:14742       Length:14742       Length:14742       Min.   :3200100  
 Class :character   Class :character   Class :character   1st Qu.:3201600  
 Mode  :character   Mode  :character   Mode  :character   Median :3203075  
                                                          Mean   :3202902  
                                                          3rd Qu.:3204300  
                                                          Max.   :3205300  
     cases            deaths      
 Min.   :     0   Min.   :  0.00  
 1st Qu.:    80   1st Qu.:  0.00  
 Median :  1140   Median :  3.00  
 Mean   :  6746   Mean   : 20.53  
 3rd Qu.:  3950   3rd Qu.: 10.00  
 Max.   :183220   Max.   :509.00  </code></pre>
</div>
</div>
<p>A primeira coluna da planilha cont√©m <em>strings</em> que representam datas e que podem ser transformadas em objetos da linguagem R que permitem opera√ß√µes adequadas com datas (compara√ß√µes, c√°lculos de intervalos etc.).</p>
<p>A segunda (<em>state</em>), terceira (<em>name</em>) e quarta (<em>code</em>) colunas correspondem √† UF, ao munic√≠pio e ao c√≥digo do munic√≠pio (IBGE) da ocorr√™ncia e podem ser igualmente tratados como categorias (<em>fatores</em>).</p>
<div id="98bc914b" class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1"></a><span class="co"># transforma string em objeto data</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>base.covid$date <span class="op">&lt;-</span> <span class="im">as</span>.Date(base.covid$date)</span>
<span id="cb95-3"><a href="#cb95-3"></a><span class="co"># transforma UF, munic√≠pios e c√≥digos dos munic√≠pios em fatores</span></span>
<span id="cb95-4"><a href="#cb95-4"></a>base.covid$state <span class="op">&lt;-</span> <span class="im">as</span>.factor(base.covid$state)</span>
<span id="cb95-5"><a href="#cb95-5"></a>base.covid$name <span class="op">&lt;-</span> <span class="im">as</span>.factor(base.covid$name)</span>
<span id="cb95-6"><a href="#cb95-6"></a>base.covid$code <span class="op">&lt;-</span> <span class="im">as</span>.factor(base.covid$code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A fun√ß√£o <code>tapply()</code> √© √∫til para realizar opera√ß√µes em bases de dados <em>controlando</em> por uma categoria, tendo uma tabela como resultado. O exemplo a seguir soma, pela fun√ß√£o <code>sum()</code> os valores da coluna <code>deaths</code> agrupados pela coluna <code>name</code>, referente ao munic√≠pio.</p>
<div id="06285eea" class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1"></a><span class="co"># monta tabela com a soma das mortes por munic√≠pio</span></span>
<span id="cb96-2"><a href="#cb96-2"></a>tapply(base.covid$deaths, base.covid$name, <span class="bu">sum</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>         Afonso Cl√°udio      √Ågua Doce do Norte            √Åguia Branca 
                   1689                     608                     418 
                 Alegre          Alfredo Chaves           Alto Rio Novo 
                   1360                     586                     759 
               Anchieta                  Apiac√°                 Aracruz 
                   1745                     283                    6203 
        At√≠lio Vivacqua            Baixo Guandu  Barra de S√£o Francisco 
                    398                    1493                    1822 
          Boa Esperan√ßa      Bom Jesus do Norte               Brejetuba 
                   1226                     439                       6 
Cachoeiro de Itapemirim               Cariacica                 Castelo 
                  12821                   40514                    2249 
               Colatina      Concei√ß√£o da Barra    Concei√ß√£o do Castelo 
                   8988                    1022                     383 
 Divino de S√£o Louren√ßo        Domingos Martins      Dores do Rio Preto 
                     39                     994                      92 
             Ecoporanga                  Fund√£o   Governador Lindenberg 
                    931                    1862                      44 
                 Gua√ßu√≠               Guarapari                 Ibatiba 
                   1500                    8965                    1080 
                Ibira√ßu               Ibitirama                  Iconha 
                    956                     465                       2 
                  Irupi                Itagua√ßu              Itapemirim 
                    466                      69                    4193 
                Itarana                    I√∫na                 Jaguar√© 
                    192                    1947                     868 
      Jer√¥nimo Monteiro              Jo√£o Neiva        Laranja da Terra 
                    578                     777                     135 
               Linhares            Manten√≥polis              Marata√≠zes 
                   8816                     526                    5131 
      Marechal Floriano              Maril√¢ndia           Mimoso do Sul 
                   1867                     327                     478 
               Montanha                Mucurici            Muniz Freire 
                    664                     170                     477 
                  Muqui            Nova Ven√©cia                  Pancas 
                    994                    2371                     692 
          Pedro Can√°rio               Pinheiros                   Pi√∫ma 
                   1207                    1617                    1473 
             Ponto Belo      Presidente Kennedy             Rio Bananal 
                    229                    1690                     627 
        Rio Novo do Sul        Santa Leopoldina   Santa Maria de Jetib√° 
                   1063                     786                    1080 
           Santa Teresa   S√£o Domingos do Norte    S√£o Gabriel da Palha 
                    916                     848                    1619 
    S√£o Jos√© do Cal√ßado              S√£o Mateus      S√£o Roque do Cana√£ 
                    361                    5139                     652 
                  Serra               Sooretama             Vargem Alta 
                  50850                    1206                     820 
Venda Nova do Imigrante                   Viana              Vila Pav√£o 
                    757                    6385                      58 
           Vila Val√©rio              Vila Velha                 Vit√≥ria 
                    827                   47202                   41580 </code></pre>
</div>
</div>
<p>Se o resultado for transformado em <code>data.frame</code> pela fun√ß√£o <code>array2DF()</code> e podemos gerar um gr√°fico:</p>
<div id="058a020d" class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1"></a><span class="co"># transforma soma em data.frame</span></span>
<span id="cb98-2"><a href="#cb98-2"></a>base.csv.soma <span class="op">&lt;-</span> array2DF(tapply(base.covid$deaths, base.covid$name, <span class="bu">sum</span>))</span>
<span id="cb98-3"><a href="#cb98-3"></a><span class="co"># ajustamos os nomes das colunas</span></span>
<span id="cb98-4"><a href="#cb98-4"></a>colnames(base.csv.soma) <span class="op">&lt;-</span> c(<span class="st">"municipio"</span>,<span class="st">"total"</span>)</span>
<span id="cb98-5"><a href="#cb98-5"></a><span class="co"># convertemos o munic√≠pio em fator</span></span>
<span id="cb98-6"><a href="#cb98-6"></a>base.csv.soma$municipio <span class="op">&lt;-</span> <span class="im">as</span>.factor(base.csv.soma$municipio)</span>
<span id="cb98-7"><a href="#cb98-7"></a><span class="co"># aumenta margem inferior do gr√°fico</span></span>
<span id="cb98-8"><a href="#cb98-8"></a>par(mar<span class="op">=</span>c(<span class="dv">12</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">2</span>))</span>
<span id="cb98-9"><a href="#cb98-9"></a><span class="co"># plota com r√≥tulos do eixo em 90¬∞ (las=2)</span></span>
<span id="cb98-10"><a href="#cb98-10"></a>plot(base.csv.soma$municipio,base.csv.soma$total, las<span class="op">=</span><span class="dv">2</span>, main<span class="op">=</span><span class="st">"Mortes por munic√≠pio (mar-out 2020)"</span>,ylab<span class="op">=</span><span class="st">"Total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="aula-01_files/figure-html/cell-54-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="planilhas-microsoft-excel-xlsx" class="level3">
<h3 class="anchored" data-anchor-id="planilhas-microsoft-excel-xlsx">3.2 Planilhas Microsoft Excel (XLSX)</h3>
<p>A importa√ß√£o de planilhas <code>XLSX</code> segue a mesma l√≥gica dos arquivos <code>CSV</code>, por√©m depende da instala√ß√£o e carregamento do pacote <code>openxlsx</code>.</p>
<div id="cc622c84" class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1"></a><span class="co"># instala e carrega pacote</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>install.packages(<span class="st">'openxlsx'</span>)</span>
<span id="cb99-3"><a href="#cb99-3"></a>library(openxlsx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package ‚Äòopenxlsx‚Äô is in use and will not be installed</code></pre>
</div>
</div>
<p>A base de dados <code>suicidios-es.xlsx</code> cont√©m dados sobre suic√≠dios no Esp√≠rito Santo e foi obtida no Data SUS. A fun√ß√£o <code>read.xlsx()</code> carrega a planilha dispon√≠vel na pasta <code>dados</code> e, ao contr√°rio do arquivo <code>CSV</code>, o documento <code>XLSX</code> cont√©m metadados mais ricos e recursos avan√ßados para representar diferentes tipos de dados.</p>
<div id="8d73e8fe" class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1"></a><span class="co"># importa base xlsx</span></span>
<span id="cb101-2"><a href="#cb101-2"></a>base.sus <span class="op">&lt;-</span> read.xlsx(<span class="st">'./dados/suicidios-es.xlsx'</span>)</span>
<span id="cb101-3"><a href="#cb101-3"></a><span class="co"># sum√°rio dos dados</span></span>
<span id="cb101-4"><a href="#cb101-4"></a>summary(base.sus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>     meso              micro            municipio            corte          
 Length:9636        Length:9636        Length:9636        Length:9636       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
    fator                ano           total            ano_num    
 Length:9636        Min.   :2006   Min.   : 0.0000   Min.   :2006  
 Class :character   1st Qu.:2008   1st Qu.: 0.0000   1st Qu.:2008  
 Mode  :character   Median :2011   Median : 0.0000   Median :2011  
                    Mean   :2011   Mean   : 0.9325   Mean   :2011  
                    3rd Qu.:2014   3rd Qu.: 1.0000   3rd Qu.:2014  
                    Max.   :2016   Max.   :20.0000   Max.   :2016  </code></pre>
</div>
</div>
<p>Um dos recursos mais importantes do pacote <code>openxlsx</code> consiste no salvamento de <code>data.frames</code> resultantes dos processamentos como planilhas Microsoft Excel ‚Äî fun√ß√£o <code>write.xlsx()</code>. Isso facilita a exporta√ß√£o dos dados processados, de modo que an√°lises subsequentes n√£o precisem partir dos dados brutos originais.</p>
<p>O exemplo abaixo exporta <code>base.covid.soma</code>, que consolida as mortes por Covid-19 por munic√≠pio em um arquivo <code>XLSX</code>:</p>
<div id="9bf067cc" class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># exporta base</span></span>
<span id="cb103-2"><a href="#cb103-2"></a>write.xlsx(base.csv.soma, <span class="st">"./dados/total-mortes-municipio.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="atividade" class="level1">
<h1>4. Atividade</h1>
<p>Explore a base de dados <code>suicidios-es.xlsx</code> e crie um novo <em>notebook</em> no Positron para realizar as seguintes tarefas:</p>
<ol type="1">
<li>Quais munic√≠pios existem na base? Elabore uma lista com eles.</li>
<li>Quantos casos foram registrados por munic√≠p√≠o? Gere uma tabela e a exporte como <code>XLSX</code>.</li>
<li>A partir da tabela gerada anteriormente, calcule as estat√≠sticas descritivas (m√©dia, mediana e desvio padr√£o);</li>
<li>Gere um gr√°fico com os munic√≠pios no eixo X e o total de casos no eixo Y.</li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>